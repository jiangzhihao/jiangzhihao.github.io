var d=Object.defineProperty;var m=(i,e,s)=>e in i?d(i,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[e]=s;var a=(i,e,s)=>(m(i,typeof e!="symbol"?e+"":e,s),s);import{M as r,V as n,C as o,T as p,E as u,W as g,S as w,H as M,A as x,a as z,P as _}from"./nativeXRFrame-b7f26ff2.js";import{G as f}from"./babylon.inspector.bundle.max-98dcbd32.js";import{d as A,r as G,o as H,c as b,a as c,F as L,b as E,p as v,e as S,_ as C}from"./index-bf5306e0.js";import"./_commonjsHelpers-edff4021.js";class P{constructor(e,s,t){this.size=e,this.scene=s,this.hl=t,this.size=e,this.scene=s,this.createAxes()}createAxes(){const e=r.CreateLines("helper-xAxis",{points:[new n(-this.size,0,0),new n(this.size,0,0)]},this.scene),s=r.CreateLines("helper-yAxis",{points:[new n(0,-this.size,0),new n(0,this.size,0)]},this.scene),t=r.CreateLines("helper-zAxis",{points:[new n(0,0,-this.size),new n(0,0,this.size)]},this.scene);e.color=new o(1,0,0),s.color=new o(0,1,0),t.color=new o(0,0,1),e.alpha=.6,s.alpha=.6,t.alpha=.6,this.hl.addExcludedMesh(e),this.hl.addExcludedMesh(s),this.hl.addExcludedMesh(t);var h=new p("axes");e.parent=h,s.parent=h,t.parent=h}}class y{constructor(e,s,t){this.number=e,this.scene=s,this.hl=t,this.number=e,this.scene=s,this.createAxes()}createAxes(){var e=new p("grid");for(let s=-this.number;s<this.number;s++){if(s===0)continue;const t=r.CreateLines("helper-xAxis",{points:[new n(-this.number,0,s),new n(this.number,0,s)]},this.scene),h=r.CreateLines("helper-zAxis",{points:[new n(s,0,-this.number),new n(s,0,this.number)]},this.scene);t.color=new o(.6,.6,.6),h.color=new o(.6,.6,.6),s%10===0?(t.alpha=.8,h.alpha=.8):(t.alpha=.5,h.alpha=.5),t.parent=e,h.parent=e,this.hl.addExcludedMesh(t),this.hl.addExcludedMesh(h)}}}class l{constructor(e){a(this,"dom");this.engine=e,this.dom=document.getElementById("fps")}renderFps(){this.dom.innerHTML=this.engine.getFps().toFixed()+" fps"}}class B{constructor(e){a(this,"gizmoManager");this.scene=e,this.initGizmo()}initGizmo(){this.gizmoManager=new f(this.scene),this.gizmoManager.positionGizmoEnabled=!0,this.gizmoManager.rotationGizmoEnabled=!0,this.gizmoManager.usePointerToAttachGizmos=!1}attachGizmoToMesh(e){this.gizmoManager.attachToMesh(e)}}class T{constructor(e,s){a(this,"selectedMesh",[]);a(this,"gizmoHelper");this.scene=e,this.hl=s,this.createListener(),this.gizmoHelper=new B(e)}createListener(){this.scene.onPointerDown=(e,s,t)=>{this.selectedMesh.length>0&&(this.hl.removeMesh(this.selectedMesh.pop()),this.gizmoHelper.attachGizmoToMesh(null)),s.pickedMesh&&e.button===0&&!s.pickedMesh.name.startsWith("helper-")&&(this.selectedMesh.push(s.pickedMesh),this.hl.addMesh(s.pickedMesh,o.Green()),this.gizmoHelper.attachGizmoToMesh(s.pickedMesh)),e.button===2&&(s.pickedMesh.dispose(),this.gizmoHelper.attachGizmoToMesh(null))}}}class F{constructor(e,s){a(this,"scene");a(this,"engine");a(this,"fpsHelper");a(this,"camera");a(this,"hl");s?this.initGPUEngine(e):this.initGLEngine(e)}initGLEngine(e){this.engine=new u(e,!0,{stencil:!0}),this.fpsHelper=new l(this.engine),this.scene=this.createScene(),this.createMesh(),this.engine.runRenderLoop(()=>{this.scene.render(),this.fpsHelper.renderFps()})}initGPUEngine(e){this.engine=new g(e),this.fpsHelper=new l(this.engine),this.engine.initAsync().then(()=>{this.scene=this.createScene(),this.createMesh(),this.engine.runRenderLoop(()=>{this.scene.render(),this.fpsHelper.renderFps()})})}createScene(){const e=new w(this.engine);this.hl=new M("hl1",e);const s=new x("camera",-3.25*Math.PI/5,Math.PI/3,5,new n(0,0,0));this.camera=s,s.lowerRadiusLimit=2,s.upperRadiusLimit=200,s.wheelPrecision=20,s.attachControl();const t=new z("light",new n(0,1,0),e);return t.intensity=.5,new P(500,e,this.hl),new y(500,e,this.hl),new T(e,this.hl),e}createMesh(){this.hl.blurHorizontalSize=.5,this.hl.blurVerticalSize=.5,this.hl.innerGlow=!1;for(let t=-10;t<10;t=t+2){const h=r.CreateBox(`box-${t}`);h.position=new n(t,0,0);var s=new _;h.addBehavior(s)}}}const R=i=>(v("data-v-8949ae43"),i=i(),S(),i),k={class:"main"},V=R(()=>c("div",{id:"fps"},"0",-1)),U=A({__name:"index",setup(i){const e=G();return H(()=>{new F(e.value,!1)}),(s,t)=>(E(),b(L,null,[c("main",k,[c("canvas",{ref_key:"canvas",ref:e,class:"canvas"},null,512)]),V],64))}});const j=C(U,[["__scopeId","data-v-8949ae43"]]);export{j as default};
